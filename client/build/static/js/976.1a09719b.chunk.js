"use strict";(self.webpackChunkecommerce_site=self.webpackChunkecommerce_site||[]).push([[976],{3976:function(n,e,t){t.r(e),t.d(e,{default:function(){return V}});var r,i,a,s,c,o,d,l,p,m=t(4165),x=t(2982),u=t(5861),h=t(885),v=t(2791),f=t(8820),_=t(4373),g=t(7692),w=t(168),b=t(7691),j=b.ZP.div(r||(r=(0,w.Z)(["\n  width: clamp(250px, 90%, 900px);\n  margin: 0px auto;\n  padding: 115px 0 115px;\n  min-height: 85vh;\n\n  .cart__order-success-text {\n    text-align: center;\n    font-size: clamp(1rem, 4vw, 1.4rem);\n    font-weight: 500;\n    margin-top: 50px;\n    line-height: 1.3rem;\n  }\n\n  .cart__view-order-btn {\n    display: block;\n    padding: 7px 14px;\n    font-size: clamp(13px, 1.2vw, 1rem);\n    margin: 40px auto 0;\n  }\n\n  @media screen and (max-width: 600px) {\n    .cart__view-order-btn {\n      padding: 6px 12px;\n      margin: 30px auto 0;\n    }\n  }\n"]))),y=b.ZP.div(i||(i=(0,w.Z)(["\n  display: flex;\n  justify-content: space-between;\n\n  @media screen and (max-width: 950px) {\n    flex-direction: column;\n  }\n"]))),A=b.ZP.div(a||(a=(0,w.Z)(["\n  flex-basis: 57%;\n"]))),E=b.ZP.div(s||(s=(0,w.Z)(["\n  flex-basis: 38%;\n  height: 45vh;\n  box-shadow: -1px 3px 8px 0px rgba(0, 0, 0, 0.15);\n  padding: 30px;\n  border-radius: 10px;\n\n  div {\n    font-size: clamp(1rem, 1.5vw, 1.1rem);\n    font-weight: 500;\n  }\n\n  .cart__total-products {\n    span {\n      font-weight: 600;\n    }\n  }\n\n  .cart__total-price {\n    margin-top: 15px;\n    span {\n      font-weight: 600;\n      font-size: clamp(1.1rem, 1.5vw, 1.2rem);\n      margin-left: 20px;\n    }\n  }\n\n  .cart__order-btn {\n    width: 100%;\n    padding: 7px;\n    font-size: clamp(14.5px, 1.5vw, 15.5px);\n    margin-top: 30px;\n  }\n\n  .cart__order-static-btn {\n    cursor: auto;\n    &:active {\n      background: var(--background-color);\n    }\n  }\n  .cart__empty-address-msg {\n    display: flex;\n    align-items: center;\n    color: #f50f0f;\n    font-weight: 600;\n    margin-top: 20px;\n    font-size: clamp(15px, 2vw, 1.05rem);\n\n    svg {\n      margin-right: 4px;\n      font-size: clamp(1rem, 2vw, 1.1rem);\n    }\n  }\n"]))),Z=b.ZP.div(c||(c=(0,w.Z)(["\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  padding: 30px;\n  border-radius: 10px;\n  margin-bottom: 30px;\n  box-shadow: -1px 3px 8px 0px rgba(0, 0, 0, 0.15);\n\n  img {\n    width: 110px;\n    height: 100px;\n    cursor: pointer;\n  }\n\n  .cart__item-details {\n    flex: 1;\n    padding-left: 30px;\n\n    .cart__item-title {\n      width: fit-content;\n      margin-bottom: 10px;\n      font-weight: 500;\n      font-size: clamp(14px, 1.3vw, 15px);\n      line-height: 1.3rem;\n      cursor: pointer;\n    }\n    .cart__item-price {\n      font-weight: 600;\n      font-size: clamp(15px, 1.5vw, 1rem);\n    }\n  }\n\n  @media screen and (max-width: 600px) {\n    padding: 20px 15px;\n  }\n"]))),k=b.ZP.div(o||(o=(0,w.Z)(["\n  display: flex;\n  align-items: center;\n  margin-top: 20px;\n\n  .cart__qty-btns {\n    display: flex;\n    height: 30px;\n    border: 1px solid var(--primary-theme-color);\n    margin-right: 20px;\n\n    div {\n      width: 40px;\n      height: 100%;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      font-weight: 600;\n      font-size: clamp(14px, 1.2vw, 1rem);\n      transition: 300ms background-color ease-in-out;\n      user-select: none;\n\n      &:not(:last-child) {\n        border-right: 1px solid var(--primary-theme-color);\n      }\n      @media screen and (max-width: 600px) {\n        width: 28px;\n      }\n    }\n\n    .cart__item-delete {\n      font-size: clamp(14px, 1.2vw, 1rem);\n      cursor: pointer;\n      &:active {\n        background-color: var(--primary-theme-color);\n      }\n    }\n\n    .cart__item-add {\n      font-size: clamp(1rem, 1.8vw, 1.2rem);\n      cursor: pointer;\n      &:active {\n        background-color: rgb(30, 224, 30);\n      }\n    }\n  }\n\n  .cart__move-item-btn {\n    font-size: clamp(12px, 1vw, 14px);\n    padding: 6px 12px;\n  }\n\n  @media screen and (max-width: 600px) {\n    flex-direction: column;\n    align-items: flex-start;\n\n    .cart__qty-btns {\n      margin-bottom: 15px;\n      height: 27px;\n    }\n  }\n"]))),P=t(6728),S=t(7857),C=t(9949),N=t(2979),R=t(408),z=t(6871),T=t(6098),I=t.n(T),D=t(1044),O=t(4261),B=t(4104),F=t(6053),H=b.ZP.div(d||(d=(0,w.Z)(["\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  padding: 20px;\n  border-radius: 10px;\n  margin-bottom: 30px;\n  box-shadow: -1px 3px 8px 0px rgba(0, 0, 0, 0.15);\n\n  .cart__change-address-btn {\n    font-size: clamp(12.5px, 1.2vw, 14.5px);\n    padding: 6px 12px;\n    margin-right: 0px;\n  }\n\n  .cart__address {\n    flex: 1;\n    margin-right: 10px;\n    div {\n      margin-bottom: 4px;\n      font-size: clamp(13px, 1.2vw, 14px);\n      color: rgba(0, 0, 0, 0.7);\n      font-weight: 500;\n      line-height: 1.1rem;\n    }\n\n    .cart__address-empty {\n      font-size: clamp(1rem, 2vw, 1.1rem);\n      font-weight: 500;\n    }\n\n    .cart__address-name {\n      margin-bottom: 8px;\n      color: rgba(0, 0, 0, 0.8);\n      line-height: 1.3rem;\n\n      span {\n        font-weight: 600;\n      }\n    }\n  }\n"]))),K=b.ZP.div(l||(l=(0,w.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 6;\n  width: 100%;\n  height: 100vh;\n  backdrop-filter: blur(5px);\n  background-color: rgba(0, 0, 0, 0.6);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),Y=b.ZP.div(p||(p=(0,w.Z)(["\n  background-color: white;\n  padding: 30px;\n  border-radius: 10px;\n  width: clamp(250px, 90%, 600px);\n  max-height: 95vh;\n  overflow-y: auto;\n\n  @media screen and (max-width: 600px) {\n    max-height: 80vh;\n  }\n"]))),U=t(4614),W=t(7486),G=t(3077),L=t(184),M=function(){var n=(0,B.Un)(),e=n.addresses,t=n.selectedAddress,r=(0,B.dd)(),i=r.openAddresses,a=r.setOpenAddresses,s=r.openNewAddress,c=r.setOpenNewAddress,o=(0,W.O8)((function(){return a(!1)})),d=null===e||void 0===e?void 0:e.find((function(n){return n.id===t}));return(0,L.jsxs)(H,{children:[(0,L.jsx)("div",{className:"cart__address",children:d?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:"cart__address-name",children:["Delivery to :",(0,L.jsxs)("span",{children:[" ",null===d||void 0===d?void 0:d.name,", ",null===d||void 0===d?void 0:d.city,"-",null===d||void 0===d?void 0:d.pincode]})]}),(0,L.jsx)("div",{children:null===d||void 0===d?void 0:d.area}),(0,L.jsx)("div",{children:null===d||void 0===d?void 0:d.state})]}):(0,L.jsx)("div",{className:"cart__address-empty",children:"Address is not selected"})}),(0,L.jsx)(P.Ig,{className:"cart__change-address-btn",onClick:function(){a(!0)},children:"Change"}),i&&(0,L.jsx)(K,{children:(0,L.jsxs)(Y,{ref:o,children:[(0,L.jsx)(G.nK,{}),(0,L.jsxs)(U.H,{onClick:function(){return c(!0)},children:[(0,L.jsx)(F.dGL,{})," ",(0,L.jsx)("span",{children:" ADD NEW ADDRESS"})]}),s&&(0,L.jsx)(G.Iv,{})]})})]})},q="https://shopsy-one.vercel.app/api/payment",V=function(){var n=(0,z.s0)(),e=(0,B.rn)(),t=e.cartItems,r=e.wishlist,i=(0,B.aC)(),a=i.user,s=i.userName,c=(0,B.Un)(),o=c.addresses,d=c.selectedAddress,l=c.orders,p=(0,v.useState)(null),w=(0,h.Z)(p,2),b=w[0],T=w[1];(0,v.useEffect)((function(){window.scroll(0,0)}),[]);var F=function(){var n=(0,u.Z)((0,m.Z)().mark((function n(e){var r,i,s,c,p;return(0,m.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=o.find((function(n){return n.id===d})),i=(0,C.m_)(t),s=(new Date).toDateString(),c={products:t,price:i,address:r,date:s,paymentInfo:e,id:(0,O.Z)()},p=(0,R.iH)(N.db,"".concat(a.uid,"/orders")),n.prev=5,n.next=8,(0,R.t8)(p,[c].concat((0,x.Z)(l)));case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(5),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[5,10]])})));return function(e){return n.apply(this,arguments)}}(),H=function(){var n=(0,u.Z)((0,m.Z)().mark((function n(){var e,r,i,c,o,l,p,x;return(0,m.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!==d){n.next=3;break}return console.log("Empty address"),n.abrupt("return");case 3:return n.prev=3,n.next=6,(0,C.ve)("https://checkout.razorpay.com/v1/checkout.js");case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(3),alert("Razorpay SDK failed to load. Are you online?"),n.abrupt("return");case 12:return e=(0,C.m_)(t),r="".concat(q,"/orders"),n.next=16,D.Z.post(r,{amount:e});case 16:if(i=n.sent){n.next=20;break}return alert("Server error. Are you online?"),n.abrupt("return");case 20:c=i.data,o=c.id,l=c.amount,p=c.currency,x={key:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBfLwjYkyQXgYlHpCiIr-Hn0TSYEiXQM9Y",REACT_APP_FIREBASE_APP_ID:"1:518101694783:web:e8e8e74d62dd0640983b8a",REACT_APP_FIREBASE_AUTH_DOMAIN:"e-com-3a6fb.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"518101694783",REACT_APP_FIREBASE_PROJECT_ID:"e-com-3a6fb",REACT_APP_FIREBASE_STORAGE_BUCKET:"e-com-3a6fb.appspot.com"}.RAZORPAY_KEY_ID,amount:l,currency:p,name:"Shopsy",description:"Test Transaction",image:S.Z.logo,order_id:o,handler:function(){var n=(0,u.Z)((0,m.Z)().mark((function n(e){var r,i,s;return(0,m.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r="".concat(q,"/verify"),n.next=4,D.Z.post(r,e);case 4:i=n.sent,s=i.data,F(e),T(s.message),(0,C.w0)(a,t,"","empty"),window.scroll(0,0),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}(),prefill:{name:s,email:a.email,contact:"9999999999"},theme:{color:"rgb(13, 82, 255)"}},new window.Razorpay(x).open();case 24:case"end":return n.stop()}}),n,null,[[3,8]])})));return function(){return n.apply(this,arguments)}}();return 0===t.length?b?(0,L.jsxs)(j,{children:[(0,L.jsx)("div",{className:"cart__order-success-text",style:{marginTop:"50px"},children:b}),(0,L.jsx)(P.v8,{className:"cart__view-order-btn",onClick:function(){n("/orders"),T(null)},children:"View Order"})]}):(0,L.jsx)(j,{children:(0,L.jsx)(P.cs,{children:"Your cart is empty"})}):(0,L.jsxs)(j,{children:[(0,L.jsx)(P.X0,{children:"Shopping Cart"}),(0,L.jsxs)(y,{children:[(0,L.jsxs)(A,{children:[(0,L.jsx)(M,{}),null===t||void 0===t?void 0:t.map((function(e){return(0,L.jsxs)(Z,{children:[(0,L.jsx)("img",{src:null===e||void 0===e?void 0:e.image,alt:"product",onClick:function(){return n("/product/".concat(null===e||void 0===e?void 0:e.id))}}),(0,L.jsxs)("div",{className:"cart__item-details",children:[(0,L.jsx)("div",{className:"cart__item-title",onClick:function(){return n("/product/".concat(null===e||void 0===e?void 0:e.id))},children:null===e||void 0===e?void 0:e.title}),(0,L.jsx)("div",{className:"cart__item-price",children:(0,C.mt)(null===e||void 0===e?void 0:e.price)}),(0,L.jsxs)(k,{children:[(0,L.jsxs)("div",{className:"cart__qty-btns",children:[(0,L.jsx)("div",{className:"cart__item-delete",onClick:function(){return(0,C.w0)(a,t,e,"dec")},children:1===(null===e||void 0===e?void 0:e.count)?(0,L.jsx)(f.VPh,{}):(0,L.jsx)(f.ywL,{})}),(0,L.jsx)("div",{children:null===e||void 0===e?void 0:e.count}),(0,L.jsx)("div",{className:"cart__item-add",onClick:function(){return(0,C.w0)(a,t,e,"inc")},children:(0,L.jsx)(_.D0w,{})})]}),(0,L.jsx)(P.Ig,{className:"cart__move-item-btn",onClick:function(){return function(n){(0,C.eG)(a,r,n,"move"),(0,C.w0)(a,t,n,"remove")}(e)},children:"Move to Wishlist"})]})]})]},null===e||void 0===e?void 0:e.id)}))]}),(0,L.jsxs)(E,{children:[(0,L.jsxs)("div",{className:"cart__total-products",children:["Total Products (",(0,L.jsx)("span",{children:(0,C.e2)(t)}),")"]}),(0,L.jsxs)("div",{className:"cart__total-price",children:["Total Amount"," ",(0,L.jsxs)("span",{children:["\u20b9 ",I()((0,C.m_)(t)).format("0,0")]})]}),(0,L.jsx)(P.v8,{className:"cart__order-btn ".concat(""===d&&"cart__order-static-btn"),onClick:H,children:"Place Order"}),""===d&&(0,L.jsxs)("div",{className:"cart__empty-address-msg ",children:[(0,L.jsx)(g.Cw1,{}),(0,L.jsx)("span",{children:"Select address to place order"})]})]})]})]})}},4614:function(n,e,t){t.d(e,{H:function(){return o},W:function(){return c}});var r,i,a=t(168),s=t(7691),c=s.ZP.div(r||(r=(0,a.Z)(["\n  width: clamp(250px, 90%, 550px);\n  min-height: 85vh;\n  margin: 0 auto;\n  padding: 115px 0px;\n"]))),o=s.ZP.div(i||(i=(0,a.Z)(["\n  width: fit-content;\n  display: flex;\n  align-items: center;\n  color: rgba(0, 0, 0, 0.6);\n  cursor: pointer;\n  transition: 200ms color ease-in-out;\n\n  svg {\n    font-size: clamp(1.6rem, 2.5vw, 1.8rem);\n    margin-right: 5px;\n  }\n  span {\n    font-size: clamp(1rem, 2vw, 1.1rem);\n    font-weight: 600;\n  }\n\n  &:hover {\n    color: rgba(0, 0, 0, 0.8);\n  }\n"])))}}]);
//# sourceMappingURL=976.1a09719b.chunk.js.map